---
import { getCollection, render } from 'astro:content';
import SiteLayout from '@/layouts/SiteLayout.astro';
import TrustBadgeStrip from '@/components/sections/TrustBadgeStrip.astro';
import { StickyQuoteCta } from '@/components/islands/StickyQuoteCta';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((project) => ({ params: { slug: project.slug }, props: { project } }));
}

const { project } = Astro.props;
const { Content } = await render(project);
---
<SiteLayout title={`${project.data.title} | [BRAND NAME] Electric`} description={project.data.scope}>
  <article class="container-shell py-16">
    <nav class="text-xs text-white/55" aria-label="Breadcrumbs">
      <a href="/Website2026/" class="hover:text-white">Home</a> / <a href="/Website2026/projects/" class="hover:text-white">Projects</a> / <span class="text-white/80">{project.data.title}</span>
    </nav>
    <h1 class="section-title mt-4 font-black">{project.data.title}</h1>
    <p class="mt-3 text-white/80">{project.data.scope}</p>
    <div class="mt-6 grid gap-4 md:grid-cols-2">
      <img src={project.data.beforeImage} alt={`Before - ${project.data.coverAlt}`} class="rounded-lg border border-white/15" />
      <img src={project.data.afterImage} alt={`After - ${project.data.coverAlt}`} class="rounded-lg border border-white/15" />
    </div>
    <div class="surface-card mt-6 p-5">
      <ul class="grid gap-2 text-sm text-white/80 sm:grid-cols-3">
        <li><strong>Location:</strong><br />{project.data.city}</li>
        <li><strong>Duration:</strong><br />{project.data.duration}</li>
        <li><strong>Category:</strong><br />{project.data.category}</li>
      </ul>
      <div class="mt-4 flex flex-wrap gap-2">
        {project.data.tags.map((tag) => <span class="rounded-full border border-white/20 px-3 py-1 text-xs text-white/75">{tag}</span>)}
      </div>
    </div>
    <div class="prose prose-invert mt-8 max-w-none"><Content /></div>
    <div class="mt-8">
      <TrustBadgeStrip />
    </div>
    <div class="mt-8 flex flex-wrap gap-3">
      <a href="/Website2026/quote/" class="inline-flex min-h-12 items-center rounded-md bg-[var(--color-amber)] px-6 font-bold text-black">Discuss Similar Project</a>
      <a href="/Website2026/projects/" class="inline-flex min-h-12 items-center rounded-md border border-white/25 px-6">Back to Portfolio</a>
    </div>
    <StickyQuoteCta client:load label="Start a Similar Project" />
  </article>
</SiteLayout>
