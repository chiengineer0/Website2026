---
import { getCollection, render } from 'astro:content';
import SiteLayout from '@/layouts/SiteLayout.astro';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((project) => ({ params: { slug: project.slug }, props: { project } }));
}

const { project } = Astro.props;
const { Content } = await render(project);
---
<SiteLayout title={`${project.data.title} | [BRAND NAME] Electric`} description={project.data.scope}>
  <article class="container-shell py-16">
    <a href="/Website2026/projects/" class="text-sm text-[var(--color-electric)]">‚Üê Back to projects</a>
    <h1 class="mt-4 text-4xl font-black">{project.data.title}</h1>
    <p class="mt-3 text-white/80">{project.data.scope}</p>
    <div class="mt-6 grid gap-4 md:grid-cols-2">
      <img src={project.data.beforeImage} alt={`Before - ${project.data.coverAlt}`} class="rounded-lg" />
      <img src={project.data.afterImage} alt={`After - ${project.data.coverAlt}`} class="rounded-lg" />
    </div>
    <ul class="mt-6 grid gap-2 text-sm text-white/80">
      <li><strong>Location:</strong> {project.data.city}</li>
      <li><strong>Duration:</strong> {project.data.duration}</li>
      <li><strong>Tags:</strong> {project.data.tags.join(', ')}</li>
    </ul>
    <div class="prose prose-invert mt-8 max-w-none"><Content /></div>
  </article>
</SiteLayout>
