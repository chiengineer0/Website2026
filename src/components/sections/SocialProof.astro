---
import { getCollection } from 'astro:content';
import { CounterStats } from '@/components/islands/CounterStats';
const testimonials = await getCollection('testimonials');
---
<section class="container-shell py-16">
  <CounterStats client:load />

  <h2 class="section-title mt-14 font-black">Client Confidence, Earned Daily</h2>
  <div class="mt-6 -mx-4 flex snap-x snap-mandatory gap-4 overflow-x-auto px-4 pb-2 lg:mx-0 lg:grid lg:grid-cols-3 lg:overflow-visible lg:px-0">
    {testimonials.map((testimonial) => (
      <article class="surface-card min-w-[82%] snap-start p-5 lg:min-w-0">
        <p class="text-[var(--color-amber)]">{'★'.repeat(testimonial.data.rating)}<span class="ml-2 text-xs text-white/55">Verified Client Review</span></p>
        <blockquote class="mt-3 text-white/85">“{testimonial.data.quote}”</blockquote>
        <p class="mt-4 text-sm font-semibold">{testimonial.data.name} · {testimonial.data.city}</p>
        <span class="mt-2 inline-flex rounded-full border border-white/20 px-3 py-1 text-xs">{testimonial.data.jobType}</span>
      </article>
    ))}
  </div>

  <div class="mt-8 flex flex-wrap gap-3 text-xs text-white/70">
    {['NECA', 'IBEW', 'Square D', 'Generac', 'Tesla Certified', 'Master Electrician Board'].map((logo) => (
      <span class="rounded-full border border-white/20 px-3 py-2">{logo}</span>
    ))}
  </div>
</section>
