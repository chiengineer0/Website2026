---
import { getCollection } from 'astro:content';
import { BeforeAfterSlider } from '@/components/islands/BeforeAfterSlider';
const projects = await getCollection('projects');
const categories = ['All', 'Residential', 'Commercial', 'Panel', 'EV', 'Lighting', 'Industrial'];
---
<section class="container-shell py-16">
  <h2 class="section-title font-black">Featured Installations</h2>
  <div class="mt-5 flex flex-wrap gap-2" id="project-filters">
    {categories.map((category) => (
      <a href={category === 'All' ? '/Website2026/projects/' : `/Website2026/projects/?category=${category}`} class="min-h-12 rounded-full border border-white/20 px-4 py-2 text-sm transition hover:border-[var(--color-electric)] hover:bg-white/5">{category}</a>
    ))}
  </div>
  <div class="mt-8 columns-1 gap-4 md:columns-2 lg:columns-3">
    {projects.map((project) => (
      <a href={`/Website2026/projects/${project.slug}/`} class="surface-card mb-4 block break-inside-avoid overflow-hidden p-3">
        <BeforeAfterSlider
          client:idle
          beforeSrc={project.data.beforeImage}
          afterSrc={project.data.afterImage}
          beforeAlt={`Before - ${project.data.coverAlt}`}
          afterAlt={`After - ${project.data.coverAlt}`}
        />
        <h3 class="mt-3 font-semibold">{project.data.title}</h3>
        <p class="text-sm text-white/70">{project.data.city} · {project.data.duration}</p>
        <p class="mt-2 text-xs text-[var(--color-electric)]">{project.data.category} · View Case Study →</p>
      </a>
    ))}
  </div>
</section>
